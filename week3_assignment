#Complete Project Code

import requests_with_caching
import json

def get_movies_from_tastedive(name):
    baseurl = "https://tastedive.com/api/similar" 
    query_params = {}
    query_params["q"] = name
    query_params["type"] = "movies"
    query_params["limit"] = 5
    this_page_cache = requests_with_caching.get(baseurl, params = query_params)
    return json.loads(this_page_cache.text)
    
def extract_movie_titles(movie_dict):
    return [movie['Name'] for movie in movie_dict['Similar']['Results']]
    
def get_related_titles(movie_lst):
    temp = list()
    final = list()
    for movie in movie_lst:
        temp.append(extract_movie_titles(get_movies_from_tastedive(movie)))
    for lst in temp:
        for movie in lst:
            if movie not in final:
                final.append(movie)
    return final

    
    
